From 01297d1648ae31a696d8b6bfa30e777fc8062b20 Mon Sep 17 00:00:00 2001
From: Kartatz <105828205+Kartatz@users.noreply.github.com>
Date: Sun, 2 Nov 2025 15:07:56 -0300
Subject: [PATCH] Enable automatic linking of libatomic

---
 Makefile.def                  |   11 +-
 Makefile.in                   | 3279 +++++++++++++++++++++++++++++++++
 Makefile.tpl                  |   17 +
 configure                     |    5 +
 configure.ac                  |    5 +
 gcc/common.opt                |    4 +
 gcc/common.opt.urls           |    3 +
 gcc/config.in                 |   12 +
 gcc/config/alpha/linux.h      |    2 +-
 gcc/config/arm/uclinux-elf.h  |    5 +-
 gcc/config/arm/unknown-elf.h  |    2 +-
 gcc/config/avr/avrlibc.h      |    2 +-
 gcc/config/bfin/linux.h       |    2 +-
 gcc/config/darwin.h           |    2 +-
 gcc/config/gnu-user.h         |    3 +-
 gcc/config/lm32/uclinux-elf.h |    2 +-
 gcc/config/rs6000/linux64.h   |    4 +-
 gcc/config/rs6000/rtems.h     |    4 +-
 gcc/config/sparc/sparc.h      |    4 +-
 gcc/configure                 |   16 +
 gcc/configure.ac              |   14 +
 gcc/doc/invoke.texi           |    8 +-
 gcc/gcc.cc                    |   22 +
 libatomic/Makefile.am         |   38 +-
 libatomic/Makefile.in         |   35 +-
 libatomic/acinclude.m4        |    6 +
 libatomic/configure           |   52 +-
 libatomic/configure.ac        |   33 +-
 libgcc/config/t-slibgcc       |   15 +-
 29 files changed, 3564 insertions(+), 43 deletions(-)

diff --git a/Makefile.def b/Makefile.def
index 3f980bce8..13cc54869 100644
--- a/Makefile.def
+++ b/Makefile.def
@@ -649,14 +649,15 @@ dependencies = { module=all-m4; on=all-build-texinfo; };
 // on libgcc and newlib/libgloss.
 lang_env_dependencies = { module=libitm; cxx=true; };
 lang_env_dependencies = { module=libffi; cxx=true; };
-lang_env_dependencies = { module=newlib; no_c=true; };
-lang_env_dependencies = { module=libgloss; no_c=true; };
-lang_env_dependencies = { module=libgcc; no_gcc=true; no_c=true; };
+lang_env_dependencies = { module=newlib; no_c=true; no_atomic=true; };
+lang_env_dependencies = { module=libgloss; no_c=true; no_atomic=true; };
+lang_env_dependencies = { module=libgcc; no_gcc=true; no_c=true; no_atomic=true; };
 // libiberty does not depend on newlib or libgloss because it must be
 // built newlib on some targets (e.g. Cygwin).  It still needs
 // a dependency on libgcc for native targets to configure.
-lang_env_dependencies = { module=libiberty; no_c=true; };
-lang_env_dependencies = { module=libgcobol; cxx=true; };
+lang_env_dependencies = { module=libiberty; no_c=true; no_atomic=true; };
+lang_env_dependencies = { module=libgcobol; cxx=true; no_atomic=true; };
+lang_env_dependencies = { module=libatomic; no_atomic=true; };
 
 dependencies = { module=configure-target-fastjar; on=configure-target-zlib; };
 dependencies = { module=all-target-fastjar; on=all-target-zlib; };
diff --git a/Makefile.in b/Makefile.in
index b1ed67d3d..f27703fbd 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -242,6 +242,7 @@ HOST_EXPORTS = \
 	GMPINC="$(HOST_GMPINC)"; export GMPINC; \
 	ISLLIBS="$(HOST_ISLLIBS)"; export ISLLIBS; \
 	ISLINC="$(HOST_ISLINC)"; export ISLINC; \
+	TARGET_CONFIGDIRS="$(TARGET_CONFIGDIRS)"; export TARGET_CONFIGDIRS; \
 	XGCC_FLAGS_FOR_TARGET="$(XGCC_FLAGS_FOR_TARGET)"; export XGCC_FLAGS_FOR_TARGET; \
 @if gcc-bootstrap
 	$(RPATH_ENVVAR)=`echo "$(TARGET_LIB_PATH)$$$(RPATH_ENVVAR)" | sed 's,::*,:,g;s,^:*,,;s,:*$$,,'`; export $(RPATH_ENVVAR); \
@@ -69397,54 +69398,3332 @@ configure-target-libgcobol: maybe-all-target-libgcc
 
 configure-target-libstdc++-v3: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libsanitizer: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libvtv: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libssp: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
+
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
 
 configure-target-libbacktrace: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libquadmath: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgfortran: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libobjc: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgo: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libphobos: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libtermcap: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-winsup: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
+
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
 
 configure-target-libffi: maybe-all-target-newlib maybe-all-target-libgloss
 configure-target-libffi: maybe-all-target-libstdc++-v3
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-zlib: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-rda: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libada: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgm2: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgomp: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libitm: maybe-all-target-newlib maybe-all-target-libgloss
 configure-target-libitm: maybe-all-target-libstdc++-v3
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libatomic: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libssp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libssp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libssp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libssp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libssp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libssp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libssp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libssp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libssp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libquadmath: maybe-all-stage1-target-libatomic
+configure-stage2-target-libquadmath: maybe-all-stage2-target-libatomic
+configure-stage3-target-libquadmath: maybe-all-stage3-target-libatomic
+configure-stage4-target-libquadmath: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libquadmath: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libquadmath: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libquadmath: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libquadmath: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libquadmath: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgfortran: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgfortran: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgfortran: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgfortran: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgfortran: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgfortran: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgfortran: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgfortran: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgfortran: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libobjc: maybe-all-stage1-target-libatomic
+configure-stage2-target-libobjc: maybe-all-stage2-target-libatomic
+configure-stage3-target-libobjc: maybe-all-stage3-target-libatomic
+configure-stage4-target-libobjc: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libobjc: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libobjc: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libobjc: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libobjc: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libobjc: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgo: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgo: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgo: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgo: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgo: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgo: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgo: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgo: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgo: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libtermcap: maybe-all-stage1-target-libatomic
+configure-stage2-target-libtermcap: maybe-all-stage2-target-libatomic
+configure-stage3-target-libtermcap: maybe-all-stage3-target-libatomic
+configure-stage4-target-libtermcap: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libtermcap: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libtermcap: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libtermcap: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libtermcap: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libtermcap: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-winsup: maybe-all-stage1-target-libatomic
+configure-stage2-target-winsup: maybe-all-stage2-target-libatomic
+configure-stage3-target-winsup: maybe-all-stage3-target-libatomic
+configure-stage4-target-winsup: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-winsup: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-winsup: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-winsup: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-winsup: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-winsup: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libffi: maybe-all-stage1-target-libatomic
+configure-stage2-target-libffi: maybe-all-stage2-target-libatomic
+configure-stage3-target-libffi: maybe-all-stage3-target-libatomic
+configure-stage4-target-libffi: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libffi: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libffi: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libffi: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libffi: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libffi: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-rda: maybe-all-stage1-target-libatomic
+configure-stage2-target-rda: maybe-all-stage2-target-libatomic
+configure-stage3-target-rda: maybe-all-stage3-target-libatomic
+configure-stage4-target-rda: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-rda: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-rda: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-rda: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-rda: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-rda: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libada: maybe-all-stage1-target-libatomic
+configure-stage2-target-libada: maybe-all-stage2-target-libatomic
+configure-stage3-target-libada: maybe-all-stage3-target-libatomic
+configure-stage4-target-libada: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libada: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libada: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libada: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libada: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libada: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgm2: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgm2: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgm2: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgm2: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgm2: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgm2: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgm2: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgm2: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgm2: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libitm: maybe-all-stage1-target-libatomic
+configure-stage2-target-libitm: maybe-all-stage2-target-libatomic
+configure-stage3-target-libitm: maybe-all-stage3-target-libatomic
+configure-stage4-target-libitm: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libitm: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libitm: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libitm: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libitm: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libitm: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgrust: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgrust: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgrust: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgrust: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgrust: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgrust: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgrust: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgrust: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgrust: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgrust: maybe-all-target-newlib maybe-all-target-libgloss
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 configure-target-libgcobol: maybe-all-target-newlib maybe-all-target-libgloss
 configure-target-libgcobol: maybe-all-target-libstdc++-v3
 
+@if gcc-bootstrap
+configure-stage1-target-libstdc++-v3: maybe-all-stage1-target-libatomic
+configure-stage2-target-libstdc++-v3: maybe-all-stage2-target-libatomic
+configure-stage3-target-libstdc++-v3: maybe-all-stage3-target-libatomic
+configure-stage4-target-libstdc++-v3: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libstdc++-v3: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libstdc++-v3: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libstdc++-v3: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libstdc++-v3: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libstdc++-v3: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libsanitizer: maybe-all-stage1-target-libatomic
+configure-stage2-target-libsanitizer: maybe-all-stage2-target-libatomic
+configure-stage3-target-libsanitizer: maybe-all-stage3-target-libatomic
+configure-stage4-target-libsanitizer: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libsanitizer: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libsanitizer: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libsanitizer: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libsanitizer: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libsanitizer: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libvtv: maybe-all-stage1-target-libatomic
+configure-stage2-target-libvtv: maybe-all-stage2-target-libatomic
+configure-stage3-target-libvtv: maybe-all-stage3-target-libatomic
+configure-stage4-target-libvtv: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libvtv: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libvtv: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libvtv: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libvtv: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libvtv: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libbacktrace: maybe-all-stage1-target-libatomic
+configure-stage2-target-libbacktrace: maybe-all-stage2-target-libatomic
+configure-stage3-target-libbacktrace: maybe-all-stage3-target-libatomic
+configure-stage4-target-libbacktrace: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libbacktrace: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libbacktrace: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libbacktrace: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libbacktrace: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libbacktrace: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libphobos: maybe-all-stage1-target-libatomic
+configure-stage2-target-libphobos: maybe-all-stage2-target-libatomic
+configure-stage3-target-libphobos: maybe-all-stage3-target-libatomic
+configure-stage4-target-libphobos: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libphobos: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libphobos: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libphobos: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libphobos: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libphobos: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-zlib: maybe-all-stage1-target-libatomic
+configure-stage2-target-zlib: maybe-all-stage2-target-libatomic
+configure-stage3-target-zlib: maybe-all-stage3-target-libatomic
+configure-stage4-target-zlib: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-zlib: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-zlib: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-zlib: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-zlib: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-zlib: maybe-all-stageautofeedback-target-libatomic
+configure-stage1-target-libgomp: maybe-all-stage1-target-libatomic
+configure-stage2-target-libgomp: maybe-all-stage2-target-libatomic
+configure-stage3-target-libgomp: maybe-all-stage3-target-libatomic
+configure-stage4-target-libgomp: maybe-all-stage4-target-libatomic
+configure-stageprofile-target-libgomp: maybe-all-stageprofile-target-libatomic
+configure-stagetrain-target-libgomp: maybe-all-stagetrain-target-libatomic
+configure-stagefeedback-target-libgomp: maybe-all-stagefeedback-target-libatomic
+configure-stageautoprofile-target-libgomp: maybe-all-stageautoprofile-target-libatomic
+configure-stageautofeedback-target-libgomp: maybe-all-stageautofeedback-target-libatomic
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap
+configure-target-libstdc++-v3: maybe-all-target-libatomic
+configure-target-libsanitizer: maybe-all-target-libatomic
+configure-target-libvtv: maybe-all-target-libatomic
+configure-target-libssp: maybe-all-target-libatomic
+configure-target-libbacktrace: maybe-all-target-libatomic
+configure-target-libquadmath: maybe-all-target-libatomic
+configure-target-libgfortran: maybe-all-target-libatomic
+configure-target-libobjc: maybe-all-target-libatomic
+configure-target-libgo: maybe-all-target-libatomic
+configure-target-libphobos: maybe-all-target-libatomic
+configure-target-libtermcap: maybe-all-target-libatomic
+configure-target-winsup: maybe-all-target-libatomic
+configure-target-libffi: maybe-all-target-libatomic
+configure-target-zlib: maybe-all-target-libatomic
+configure-target-rda: maybe-all-target-libatomic
+configure-target-libada: maybe-all-target-libatomic
+configure-target-libgm2: maybe-all-target-libatomic
+configure-target-libgomp: maybe-all-target-libatomic
+configure-target-libitm: maybe-all-target-libatomic
+configure-target-libgrust: maybe-all-target-libatomic
+@endif gcc-no-bootstrap
+
 
 CONFIGURE_GDB_TK = @CONFIGURE_GDB_TK@
 GDB_TK = @GDB_TK@
diff --git a/Makefile.tpl b/Makefile.tpl
index 7dccf91ed..2bb756b76 100644
--- a/Makefile.tpl
+++ b/Makefile.tpl
@@ -245,6 +245,7 @@ HOST_EXPORTS = \
 	GMPINC="$(HOST_GMPINC)"; export GMPINC; \
 	ISLLIBS="$(HOST_ISLLIBS)"; export ISLLIBS; \
 	ISLINC="$(HOST_ISLINC)"; export ISLINC; \
+	TARGET_CONFIGDIRS="$(TARGET_CONFIGDIRS)"; export TARGET_CONFIGDIRS; \
 	XGCC_FLAGS_FOR_TARGET="$(XGCC_FLAGS_FOR_TARGET)"; export XGCC_FLAGS_FOR_TARGET; \
 @if gcc-bootstrap
 	$(RPATH_ENVVAR)=`echo "$(TARGET_LIB_PATH)$$$(RPATH_ENVVAR)" | sed 's,::*,:,g;s,^:*,,;s,:*$$,,'`; export $(RPATH_ENVVAR); \
@@ -2097,6 +2098,11 @@ ENDFOR dependencies +]@endif gcc-bootstrap
    (if (exist? "no_gcc")
        (hash-create-handle! lang-env-deps
 	  (string-append (get "module") "-" "no_gcc") #t))
+
+   (if (exist? "no_atomic")
+       (hash-create-handle! lang-env-deps
+	  (string-append (get "module") "-" "no_atomic") #t))
+
    "" +][+ ENDFOR lang_env_dependencies +]
 
 @if gcc-bootstrap[+ FOR target_modules +][+ IF (not (lang-dep "no_gcc"))
@@ -2115,6 +2121,17 @@ configure-target-[+module+]: maybe-all-target-newlib maybe-all-target-libgloss[+
   ENDIF +][+ IF (lang-dep "cxx") +]
 configure-target-[+module+]: maybe-all-target-libstdc++-v3[+
   ENDIF +]
+
+@if gcc-bootstrap[+ FOR target_modules +][+ IF (not (lang-dep "no_atomic"))
+  +][+ IF bootstrap +][+ FOR bootstrap_stage +]
+configure-stage[+id+]-target-[+module+]: maybe-all-stage[+id+]-target-libatomic[+
+  ENDFOR +][+ ENDIF bootstrap +][+ ENDIF +][+ ENDFOR target_modules +]
+@endif gcc-bootstrap
+
+@if gcc-no-bootstrap[+ FOR target_modules +][+ IF (not (lang-dep "no_atomic")) +]
+configure-target-[+module+]: maybe-all-target-libatomic[+
+  ENDIF +][+ ENDFOR target_modules +]
+@endif gcc-no-bootstrap
 [+ ENDFOR target_modules +]
 
 CONFIGURE_GDB_TK = @CONFIGURE_GDB_TK@
diff --git a/configure b/configure
index ebc44416b..09c45c354 100755
--- a/configure
+++ b/configure
@@ -11020,6 +11020,11 @@ if echo " ${target_configdirs} " | grep " libgomp " > /dev/null 2>&1 ; then
   bootstrap_target_libs=${bootstrap_target_libs}target-libgomp,
 fi
 
+# If we are building libatomic, bootstrap it.
+if echo " ${target_configdirs} " | grep " libatomic " > /dev/null 2>&1 ; then
+  bootstrap_target_libs=${bootstrap_target_libs}target-libatomic,
+fi
+
 # If we are building libsanitizer and $BUILD_CONFIG contains bootstrap-asan
 # or bootstrap-ubsan, bootstrap it.
 if echo " ${target_configdirs} " | grep " libsanitizer " > /dev/null 2>&1; then
diff --git a/configure.ac b/configure.ac
index 730db3c14..471a23813 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3244,6 +3244,11 @@ if echo " ${target_configdirs} " | grep " libgomp " > /dev/null 2>&1 ; then
   bootstrap_target_libs=${bootstrap_target_libs}target-libgomp,
 fi
 
+# If we are building libatomic, bootstrap it.
+if echo " ${target_configdirs} " | grep " libatomic " > /dev/null 2>&1 ; then
+  bootstrap_target_libs=${bootstrap_target_libs}target-libatomic,
+fi
+
 # If we are building libsanitizer and $BUILD_CONFIG contains bootstrap-asan
 # or bootstrap-ubsan, bootstrap it.
 if echo " ${target_configdirs} " | grep " libsanitizer " > /dev/null 2>&1; then
diff --git a/gcc/common.opt b/gcc/common.opt
index e3fa0dace..487716120 100644
--- a/gcc/common.opt
+++ b/gcc/common.opt
@@ -3393,6 +3393,10 @@ Use the Modern linker (MOLD) linker instead of the default linker.
 fuse-linker-plugin
 Common Undocumented Var(flag_use_linker_plugin)
 
+flink-libatomic
+Common Driver Var(flag_link_libatomic) Init(1)
+Enable linking of libatomic.
+
 ; Positive if we should track variables, negative if we should run
 ; the var-tracking pass only to discard debug annotations, zero if
 ; we're not to run it.
diff --git a/gcc/common.opt.urls b/gcc/common.opt.urls
index 00775118e..abc39a3ce 100644
--- a/gcc/common.opt.urls
+++ b/gcc/common.opt.urls
@@ -1601,6 +1601,9 @@ UrlSuffix(gcc/Link-Options.html#index-fuse-ld_003dmold)
 fuse-linker-plugin
 UrlSuffix(gcc/Optimize-Options.html#index-fuse-linker-plugin)
 
+flink-libatomic
+UrlSuffix(gcc/Link-Options.html#index-flink-libatomic)
+
 fvar-tracking
 UrlSuffix(gcc/Debugging-Options.html#index-fvar-tracking)
 
diff --git a/gcc/config.in b/gcc/config.in
index a79c51adb..b2aa816fb 100644
--- a/gcc/config.in
+++ b/gcc/config.in
@@ -2608,6 +2608,12 @@
 #endif
 
 
+/* Define if libatomic is built for the target. */
+#ifndef USED_FOR_TARGET
+#undef TARGET_PROVIDES_LIBATOMIC
+#endif
+
+
 /* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
 #ifndef USED_FOR_TARGET
 #undef TIME_WITH_SYS_TIME
@@ -2634,6 +2640,12 @@
 #endif
 
 
+/* Define if your linker supports AS_NEEDED in linker scripts. */
+#ifndef USED_FOR_TARGET
+#undef USE_LD_AS_NEEDED_LDSCRIPT
+#endif
+
+
 /* Define to 1 if the 'long long' type is wider than 'long' but still
    efficiently supported by the host hardware. */
 #ifndef USED_FOR_TARGET
diff --git a/gcc/config/alpha/linux.h b/gcc/config/alpha/linux.h
index c4e843ff6..758817a1c 100644
--- a/gcc/config/alpha/linux.h
+++ b/gcc/config/alpha/linux.h
@@ -110,7 +110,7 @@ along with GCC; see the file COPYING3.  If not see
    %{shared|pie:crtendS.o%s;:crtend.o%s} crtn.o%s"
 
 #define LINK_GCC_C_SEQUENCE_SPEC \
-  "%{static|static-pie:--start-group} %G %{!nolibc:%L} \
+  "%{static|static-pie:--start-group} %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
    %{static|static-pie:--end-group}%{!static:%{!static-pie:%G}}"
 
 /* Use --as-needed -lgcc_s for eh support.  */
diff --git a/gcc/config/arm/uclinux-elf.h b/gcc/config/arm/uclinux-elf.h
index 1e953d652..d7b99f5ff 100644
--- a/gcc/config/arm/uclinux-elf.h
+++ b/gcc/config/arm/uclinux-elf.h
@@ -67,8 +67,9 @@
 
 #undef LINK_GCC_C_SEQUENCE_SPEC
 #define LINK_GCC_C_SEQUENCE_SPEC \
-  "%{static|static-pie:--start-group} %G %{!nolibc:%L} \
-   %{static|static-pie:--end-group}%{!static:%{!static-pie:%G %{!nolibc:%L}}}"
+  "%{static|static-pie:--start-group} %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
+   %{static|static-pie:--end-group}%{!static:%{!static-pie:%G %{!nolibc:" \
+   LINK_LIBATOMIC_SPEC "%L}}}"
 
 /* Use --as-needed -lgcc_s for eh support.  */
 #ifdef HAVE_LD_AS_NEEDED
diff --git a/gcc/config/arm/unknown-elf.h b/gcc/config/arm/unknown-elf.h
index ab3918283..a796d8702 100644
--- a/gcc/config/arm/unknown-elf.h
+++ b/gcc/config/arm/unknown-elf.h
@@ -93,4 +93,4 @@
    udivmoddi4, which will depend on the exception unwind routines,
    which will depend on abort, which is defined in libc.  */
 #undef LINK_GCC_C_SEQUENCE_SPEC
-#define LINK_GCC_C_SEQUENCE_SPEC "--start-group %G %{!nolibc:%L} --end-group"
+#define LINK_GCC_C_SEQUENCE_SPEC "--start-group %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} --end-group"
diff --git a/gcc/config/avr/avrlibc.h b/gcc/config/avr/avrlibc.h
index 409a69451..0e87fc4b8 100644
--- a/gcc/config/avr/avrlibc.h
+++ b/gcc/config/avr/avrlibc.h
@@ -36,4 +36,4 @@ along with GCC; see the file COPYING3.  If not see
 
 #undef  LINK_GCC_C_SEQUENCE_SPEC
 #define LINK_GCC_C_SEQUENCE_SPEC \
-  "--start-group %G %{!nolibc:%L} --end-group"
+  "--start-group %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} --end-group"
diff --git a/gcc/config/bfin/linux.h b/gcc/config/bfin/linux.h
index c3cecf776..b75997987 100644
--- a/gcc/config/bfin/linux.h
+++ b/gcc/config/bfin/linux.h
@@ -35,7 +35,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
 
 #undef LINK_GCC_C_SEQUENCE_SPEC
 #define LINK_GCC_C_SEQUENCE_SPEC \
-  "%{static|static-pie:--start-group} %{mfast-fp:-lbffastfp} %G %{!nolibc:%L} \
+  "%{static|static-pie:--start-group} %{mfast-fp:-lbffastfp} %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
    %{static|static-pie:--end-group} \
    %{!static:%{!static-pie:%{mfast-fp:-lbffastfp} %G}}"
 
diff --git a/gcc/config/darwin.h b/gcc/config/darwin.h
index 9b9a3fe40..bf76b87a3 100644
--- a/gcc/config/darwin.h
+++ b/gcc/config/darwin.h
@@ -470,7 +470,7 @@ extern GTY(()) int darwin_ms_struct;
    depend on libgcc. */
 #undef  LINK_GCC_C_SEQUENCE_SPEC
 #define LINK_GCC_C_SEQUENCE_SPEC \
- "%G %{!nolibc:%L} "
+ "%G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} "
 
 /* ld64 supports a sysroot, it just has a different name and there's no easy
    way to check for it at config time.  */
diff --git a/gcc/config/gnu-user.h b/gcc/config/gnu-user.h
index 4c4e31efa..151871540 100644
--- a/gcc/config/gnu-user.h
+++ b/gcc/config/gnu-user.h
@@ -109,8 +109,9 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
 #define LINK_EH_SPEC "%{!static|static-pie:--eh-frame-hdr} "
 #endif
 
+
 #define GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC \
-  "%{static|static-pie:--start-group} %G %{!nolibc:%L} \
+  "%{static|static-pie:--start-group} %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
    %{static|static-pie:--end-group}%{!static:%{!static-pie:%G}}"
 
 #undef LINK_GCC_C_SEQUENCE_SPEC
diff --git a/gcc/config/lm32/uclinux-elf.h b/gcc/config/lm32/uclinux-elf.h
index e3f51b39d..1926e26ae 100644
--- a/gcc/config/lm32/uclinux-elf.h
+++ b/gcc/config/lm32/uclinux-elf.h
@@ -69,7 +69,7 @@
 
 #undef LINK_GCC_C_SEQUENCE_SPEC
 #define LINK_GCC_C_SEQUENCE_SPEC \
-  "%{static|static-pie:--start-group} %G %{!nolibc:%L} \
+  "%{static|static-pie:--start-group} %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
    %{static|static-pie:--end-group}%{!static:%{!static-pie:%G}}"
 
 #undef  CC1_SPEC
diff --git a/gcc/config/rs6000/linux64.h b/gcc/config/rs6000/linux64.h
index 0316d8cb6..dd4d3f1f2 100644
--- a/gcc/config/rs6000/linux64.h
+++ b/gcc/config/rs6000/linux64.h
@@ -393,9 +393,9 @@ extern int dot_symbols;
 /* Use gnu-user.h LINK_GCC_SEQUENCE_SPEC for linux.  */
 #undef LINK_GCC_C_SEQUENCE_SPEC
 #define	LINK_GCC_C_SEQUENCE_SPEC \
-  "%{mads|myellowknife|mmvme|msim:%G %L %G;" \
+  "%{mads|myellowknife|mmvme|msim:%G" LINK_LIBATOMIC_SPEC "%L %G;" \
   "!mcall-*|mcall-linux:" GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC ";" \
-  ":%G %L %G}"
+  ":%G" LINK_LIBATOMIC_SPEC "%L %G}"
 
 #undef  TOC_SECTION_ASM_OP
 #define TOC_SECTION_ASM_OP \
diff --git a/gcc/config/rs6000/rtems.h b/gcc/config/rs6000/rtems.h
index 95b59f60a..a7b8f0f3c 100644
--- a/gcc/config/rs6000/rtems.h
+++ b/gcc/config/rs6000/rtems.h
@@ -297,9 +297,9 @@
 /* Use gnu-user.h LINK_GCC_SEQUENCE_SPEC for rtems.  */
 #undef LINK_GCC_C_SEQUENCE_SPEC
 #define	LINK_GCC_C_SEQUENCE_SPEC \
-  "%{mads|myellowknife|mmvme|msim:%G %L %G;" \
+  "%{mads|myellowknife|mmvme|msim:%G" LINK_LIBATOMIC_SPEC "%L %G;" \
   "!mcall-*|mcall-linux:" GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC ";" \
-  ":%G %L %G}"
+  ":%G" LINK_LIBATOMIC_SPEC "%L %G}"
 
 #define RTEMS_STARTFILE_SPEC "ecrti%O%s rtems_crti%O%s crtbegin%O%s"
 #define RTEMS_ENDFILE_SPEC "crtend%O%s rtems_crtn%O%s ecrtn%O%s"
diff --git a/gcc/config/sparc/sparc.h b/gcc/config/sparc/sparc.h
index 68aba0788..48ddb3d96 100644
--- a/gcc/config/sparc/sparc.h
+++ b/gcc/config/sparc/sparc.h
@@ -409,7 +409,9 @@ along with GCC; see the file COPYING3.  If not see
 
 /* Because libgcc can generate references back to libc (via .umul etc.) we have
    to list libc again after the second libgcc.  */
-#define LINK_GCC_C_SEQUENCE_SPEC "%G %{!nolibc:%L} %G %{!nolibc:%L}"
+#define LINK_GCC_C_SEQUENCE_SPEC \
+  "%G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L} \
+  %G %{!nolibc:" LINK_LIBATOMIC_SPEC "%L}"
 
 
 #define PTRDIFF_TYPE (TARGET_ARCH64 ? "long int" : "int")
diff --git a/gcc/configure b/gcc/configure
index 16965953f..2f6d0f349 100755
--- a/gcc/configure
+++ b/gcc/configure
@@ -32913,10 +32913,12 @@ else
   gcc_cv_ld_as_needed=no
 gcc_cv_ld_as_needed_option='--as-needed'
 gcc_cv_ld_no_as_needed_option='--no-as-needed'
+gcc_cv_ld_use_as_needed_ldscript=no
 if test $in_tree_ld = yes ; then
   if test "$gcc_cv_gld_major_version" -eq 2 -a "$gcc_cv_gld_minor_version" -ge 16 -o "$gcc_cv_gld_major_version" -gt 2 \
      && test $in_tree_ld_is_elf = yes; then
     gcc_cv_ld_as_needed=yes
+    gcc_cv_ld_use_as_needed_ldscript=yes
     if test "$gcc_cv_gld_major_version" -eq 2 -a "$gcc_cv_gld_minor_version" -ge 28; then
       gcc_cv_ld_as_needed_option='--push-state --as-needed'
       gcc_cv_ld_no_as_needed_option='--pop-state'
@@ -32926,6 +32928,7 @@ elif test x$gcc_cv_ld != x; then
   # Check if linker supports --as-needed and --no-as-needed options
   if $gcc_cv_ld --help 2>&1 | grep as-needed > /dev/null; then
     gcc_cv_ld_as_needed=yes
+    gcc_cv_ld_use_as_needed_ldscript=yes
     if $gcc_cv_ld --help 2>&1 | grep push-state > /dev/null \
        && $gcc_cv_ld --help 2>&1 | grep pop-state > /dev/null \
        && echo "$ld_ver" | grep GNU > /dev/null \
@@ -32944,6 +32947,7 @@ elif test x$gcc_cv_ld != x; then
       gcc_cv_ld_as_needed=yes
       gcc_cv_ld_as_needed_option="-z ignore"
       gcc_cv_ld_no_as_needed_option="-z record"
+      gcc_cv_ld_use_as_needed_ldscript=no
       ;;
   esac
 fi
@@ -32956,6 +32960,7 @@ case "$target" in
       if echo "$ld_ver" | grep GNU > /dev/null; then
         # Doesn't work with gld on Solaris/x86 due to PR ld/12320.
         gcc_cv_ld_as_needed=no
+        gcc_cv_ld_use_as_needed_ldscript=no
       fi
       ;;
     esac
@@ -32982,6 +32987,11 @@ cat >>confdefs.h <<_ACEOF
 #define LD_NO_AS_NEEDED_OPTION "$gcc_cv_ld_no_as_needed_option"
 _ACEOF
 
+fi
+if test x"$gcc_cv_ld_use_as_needed_ldscript" = xyes; then
+
+$as_echo "#define USE_LD_AS_NEEDED_LDSCRIPT 1" >>confdefs.h
+
 fi
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking linker mapfile support for clearing hardware capabilities" >&5
@@ -33482,6 +33492,12 @@ $as_echo "#define ENABLE_DEFAULT_SSP 1" >>confdefs.h
 fi
 
 
+if echo " ${TARGET_CONFIGDIRS} " | grep " libatomic " > /dev/null 2>&1 ; then
+
+$as_echo "#define TARGET_PROVIDES_LIBATOMIC 1" >>confdefs.h
+
+fi
+
 # Test for <sys/sdt.h> on the target.
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking sys/sdt.h in the target C library" >&5
diff --git a/gcc/configure.ac b/gcc/configure.ac
index 9f67e6295..06fa6078d 100644
--- a/gcc/configure.ac
+++ b/gcc/configure.ac
@@ -6562,10 +6562,12 @@ gcc_cv_ld_as_needed,
 [gcc_cv_ld_as_needed=no
 gcc_cv_ld_as_needed_option='--as-needed'
 gcc_cv_ld_no_as_needed_option='--no-as-needed'
+gcc_cv_ld_use_as_needed_ldscript=no
 if test $in_tree_ld = yes ; then
   if test "$gcc_cv_gld_major_version" -eq 2 -a "$gcc_cv_gld_minor_version" -ge 16 -o "$gcc_cv_gld_major_version" -gt 2 \
      && test $in_tree_ld_is_elf = yes; then
     gcc_cv_ld_as_needed=yes
+    gcc_cv_ld_use_as_needed_ldscript=yes
     if test "$gcc_cv_gld_major_version" -eq 2 -a "$gcc_cv_gld_minor_version" -ge 28; then
       gcc_cv_ld_as_needed_option='--push-state --as-needed'
       gcc_cv_ld_no_as_needed_option='--pop-state'
@@ -6575,6 +6577,7 @@ elif test x$gcc_cv_ld != x; then
   # Check if linker supports --as-needed and --no-as-needed options
   if $gcc_cv_ld --help 2>&1 | grep as-needed > /dev/null; then
     gcc_cv_ld_as_needed=yes
+    gcc_cv_ld_use_as_needed_ldscript=yes
     if $gcc_cv_ld --help 2>&1 | grep push-state > /dev/null \
        && $gcc_cv_ld --help 2>&1 | grep pop-state > /dev/null \
        && echo "$ld_ver" | grep GNU > /dev/null \
@@ -6593,6 +6596,7 @@ elif test x$gcc_cv_ld != x; then
       gcc_cv_ld_as_needed=yes
       gcc_cv_ld_as_needed_option="-z ignore"
       gcc_cv_ld_no_as_needed_option="-z record"
+      gcc_cv_ld_use_as_needed_ldscript=no
       ;;
   esac
 fi
@@ -6605,6 +6609,7 @@ case "$target" in
       if echo "$ld_ver" | grep GNU > /dev/null; then
         # Doesn't work with gld on Solaris/x86 due to PR ld/12320.
         gcc_cv_ld_as_needed=no
+        gcc_cv_ld_use_as_needed_ldscript=no
       fi
       ;;
     esac
@@ -6622,6 +6627,10 @@ if test x"$gcc_cv_ld_as_needed" = xyes; then
 	AC_DEFINE_UNQUOTED(LD_NO_AS_NEEDED_OPTION, "$gcc_cv_ld_no_as_needed_option",
 [Define to the linker option to keep unused dependencies.])
 fi
+if test x"$gcc_cv_ld_use_as_needed_ldscript" = xyes; then
+	AC_DEFINE(USE_LD_AS_NEEDED_LDSCRIPT, 1,
+[Define if your linker supports AS_NEEDED in linker scripts.])
+fi
 
 AC_MSG_CHECKING(linker mapfile support for clearing hardware capabilities)
 saved_LDFLAGS="$LDFLAGS"
@@ -7015,6 +7024,11 @@ if test x$enable_default_ssp = xyes ; then
 fi
 AC_SUBST([enable_default_ssp])
 
+if echo " ${TARGET_CONFIGDIRS} " | grep " libatomic " > /dev/null 2>&1 ; then
+  AC_DEFINE(TARGET_PROVIDES_LIBATOMIC, 1,
+	    [Define if libatomic is built for the target.])
+fi
+
 # Test for <sys/sdt.h> on the target.
 GCC_TARGET_TEMPLATE([HAVE_SYS_SDT_H])
 AC_CACHE_CHECK([sys/sdt.h in the target C library], [gcc_cv_sys_sdt_h], [
diff --git a/gcc/doc/invoke.texi b/gcc/doc/invoke.texi
index cf4f2b211..3ad3440e5 100644
--- a/gcc/doc/invoke.texi
+++ b/gcc/doc/invoke.texi
@@ -721,7 +721,7 @@ Objective-C and Objective-C++ Dialects}.
 
 @item Linker Options
 @xref{Link Options,,Options for Linking}.
-@gccoptlist{@var{object-file-name}  -fuse-ld=@var{linker}  -l@var{library}
+@gccoptlist{@var{object-file-name} -flink-libatomic  -fuse-ld=@var{linker}  -l@var{library}
 -nostartfiles  -nodefaultlibs  -nolibc  -nostdlib  -nostdlib++
 -e @var{entry}  --entry=@var{entry}
 -pie  -pthread  -r  -rdynamic
@@ -19096,6 +19096,12 @@ If any of these options is used, then the linker is not run, and
 object file names should not be used as arguments.  @xref{Overall
 Options}.
 
+@opindex flink-libatomic
+@item -flink-libatomic
+Enable linking of libatomic if it's supported by target, and is enabled by
+default. The negative form @option{-fno-link-libatomic} can be used to
+explicitly disable linking of libatomic.
+
 @opindex flinker-output
 @item -flinker-output=@var{type}
 This option controls code generation of the link-time optimizer.  By
diff --git a/gcc/gcc.cc b/gcc/gcc.cc
index 4fd87f2c4..4a804ba96 100644
--- a/gcc/gcc.cc
+++ b/gcc/gcc.cc
@@ -984,6 +984,17 @@ proper position among the other output files.  */
 
 /* Here is the spec for running the linker, after compiling all files.  */
 
+#if defined(TARGET_PROVIDES_LIBATOMIC) && defined(USE_LD_AS_NEEDED)
+#ifdef USE_LD_AS_NEEDED_LDSCRIPT
+#define LINK_LIBATOMIC_SPEC "%{!fno-link-libatomic:-latomic_asneeded} "
+#else
+#define LINK_LIBATOMIC_SPEC "%{!fno-link-libatomic:" LD_AS_NEEDED_OPTION \
+			    " -latomic " LD_NO_AS_NEEDED_OPTION "} "
+#endif
+#else
+#define LINK_LIBATOMIC_SPEC ""
+#endif
+
 /* This is overridable by the target in case they need to specify the
    -lgcc and -lc order specially, yet not require them to override all
    of LINK_COMMAND_SPEC.  */
@@ -1819,6 +1830,16 @@ init_gcc_specs (struct obstack *obstack, const char *shared_name,
   char *buf;
 
 #if USE_LD_AS_NEEDED
+#if defined(USE_LD_AS_NEEDED_LDSCRIPT) && !defined(USE_LIBUNWIND_EXCEPTIONS)
+  buf = concat ("%{static|static-libgcc|static-pie:", static_name, " ", eh_name, "}"
+		"%{!static:%{!static-libgcc:%{!static-pie:"
+		"%{!shared-libgcc:",
+		static_name, " ",
+		shared_name, "_asneeded}"
+		"%{shared-libgcc:",
+		shared_name, "%{!shared: ", static_name, "}"
+		"}}"
+#else
   buf = concat ("%{static|static-libgcc|static-pie:", static_name, " ", eh_name, "}"
 		"%{!static:%{!static-libgcc:%{!static-pie:"
 		"%{!shared-libgcc:",
@@ -1828,6 +1849,7 @@ init_gcc_specs (struct obstack *obstack, const char *shared_name,
 		"%{shared-libgcc:",
 		shared_name, "%{!shared: ", static_name, "}"
 		"}}"
+#endif
 #else
   buf = concat ("%{static|static-libgcc:", static_name, " ", eh_name, "}"
 		"%{!static:%{!static-libgcc:"
diff --git a/libatomic/Makefile.am b/libatomic/Makefile.am
index 0f1a71560..8fcedc2ef 100644
--- a/libatomic/Makefile.am
+++ b/libatomic/Makefile.am
@@ -69,7 +69,7 @@ libatomic_darwin_rpath += -Wl,-rpath,@loader_path
 endif
 
 libatomic_la_LDFLAGS = $(libatomic_version_info) $(libatomic_version_script) \
-	$(lt_host_flags) $(libatomic_darwin_rpath)
+	-Wc,-fno-link-libatomic $(lt_host_flags) $(libatomic_darwin_rpath)
 libatomic_la_SOURCES = gload.c gstore.c gcas.c gexch.c glfree.c lock.c init.c \
 	fenv.c fence.c flag.c
 
@@ -162,6 +162,42 @@ libatomic_convenience_la_LIBADD = $(libatomic_la_LIBADD)
 # when it is reloaded during the build of all-multi.
 all-multi: $(libatomic_la_LIBADD)
 
+# Copy built libatomic library to $build/gcc so it's easier to locate,
+# similar to libgcc.
+#
+# FIXME: libtool --mode=install also ends up copying libatomic.la in $gcc_objdir,
+# which (somehow) ends up adding $gcc_objdir to RPATH for libraries that get
+# built after libatomic, which makes RPATH insecure. Removing libatomic.la
+# from $gcc_objdir seems to fix the issue.
+
+gcc_objdir = `pwd`/$(MULTIBUILDTOP)../../gcc/
+all-local: libatomic.la
+	$(LIBTOOL) --mode=install $(INSTALL_DATA) libatomic.la $(gcc_objdir)$(MULTISUBDIR)/
+if LIBAT_BUILD_ASNEEDED_SOLINK
+	cd $(gcc_objdir)$(MULTISUBDIR) || exit 1; \
+	(echo "/* GNU ld script"; \
+	 echo "   Add DT_NEEDED entry for -latomic only if needed.  */"; \
+	 echo "INPUT ( AS_NEEDED ( -latomic ) )" \
+	) > libatomic_asneeded.so; \
+	rm -f libatomic_asneeded.a; \
+	$(LN_S) libatomic.a libatomic_asneeded.a
+endif
+	rm $(gcc_objdir)$(MULTISUBDIR)/libatomic.la
+
+if LIBAT_BUILD_ASNEEDED_SOLINK
+install-data-am: install-asneeded
+
+install-asneeded: install-toolexeclibLTLIBRARIES
+	$(MKDIR_P) "$(DESTDIR)$(toolexeclibdir)" || exit 1; \
+	cd "$(DESTDIR)$(toolexeclibdir)" || exit 1; \
+	(echo "/* GNU ld script"; \
+	 echo "   Add DT_NEEDED entry for -latomic only if needed.  */"; \
+	 echo "INPUT ( AS_NEEDED ( -latomic ) )" \
+	) > libatomic_asneeded.so; \
+	rm -f libatomic_asneeded.a; \
+	$(LN_S) libatomic.a libatomic_asneeded.a
+endif
+
 # target overrides
 -include $(tmake_file)
 
diff --git a/libatomic/Makefile.in b/libatomic/Makefile.in
index 9798e7c09..f554205e3 100644
--- a/libatomic/Makefile.in
+++ b/libatomic/Makefile.in
@@ -421,7 +421,7 @@ libatomic_version_info = -version-info $(libtool_VERSION)
 @ENABLE_DARWIN_AT_RPATH_TRUE@	-Wc,-nodefaultrpaths \
 @ENABLE_DARWIN_AT_RPATH_TRUE@	-Wl,-rpath,@loader_path
 libatomic_la_LDFLAGS = $(libatomic_version_info) $(libatomic_version_script) \
-	$(lt_host_flags) $(libatomic_darwin_rpath)
+	-Wc,-fno-link-libatomic $(lt_host_flags) $(libatomic_darwin_rpath)
 
 libatomic_la_SOURCES = gload.c gstore.c gcas.c gexch.c glfree.c lock.c \
 	init.c fenv.c fence.c flag.c $(am__append_5)
@@ -458,6 +458,15 @@ libatomic_la_LIBADD = $(foreach s,$(SIZES),$(addsuffix \
 @ARCH_X86_64_TRUE@@HAVE_IFUNC_TRUE@IFUNC_OPTIONS = -mcx16 -mcx16
 libatomic_convenience_la_SOURCES = $(libatomic_la_SOURCES)
 libatomic_convenience_la_LIBADD = $(libatomic_la_LIBADD)
+
+# Copy built libatomic library to $build/gcc so it's easier to locate,
+# similar to libgcc.
+#
+# FIXME: libtool --mode=install also ends up copying libatomic.la in $gcc_objdir,
+# which (somehow) ends up adding $gcc_objdir to RPATH for libraries that get
+# built after libatomic, which makes RPATH insecure. Removing libatomic.la
+# from $gcc_objdir seems to fix the issue.
+gcc_objdir = `pwd`/$(MULTIBUILDTOP)../../gcc/
 MULTISRCTOP = 
 MULTIBUILDTOP = 
 MULTIDIRS = 
@@ -808,7 +817,7 @@ info: info-recursive
 
 info-am:
 
-install-data-am:
+@LIBAT_BUILD_ASNEEDED_SOLINK_FALSE@install-data-am:
 
 install-dvi: install-dvi-recursive
 
@@ -901,6 +910,28 @@ vpath % $(strip $(search_path))
 # makefile fragments to avoid broken *.Ppo getting included into the Makefile
 # when it is reloaded during the build of all-multi.
 all-multi: $(libatomic_la_LIBADD)
+all-local: libatomic.la
+	$(LIBTOOL) --mode=install $(INSTALL_DATA) libatomic.la $(gcc_objdir)$(MULTISUBDIR)/
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	cd $(gcc_objdir)$(MULTISUBDIR) || exit 1; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	(echo "/* GNU ld script"; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	 echo "   Add DT_NEEDED entry for -latomic only if needed.  */"; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	 echo "INPUT ( AS_NEEDED ( -latomic ) )" \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	) > libatomic_asneeded.so; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	rm -f libatomic_asneeded.a; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	$(LN_S) libatomic.a libatomic_asneeded.a
+	rm $(gcc_objdir)$(MULTISUBDIR)/libatomic.la
+
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@install-data-am: install-asneeded
+
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@install-asneeded: install-toolexeclibLTLIBRARIES
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	$(MKDIR_P) "$(DESTDIR)$(toolexeclibdir)" || exit 1; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	cd "$(DESTDIR)$(toolexeclibdir)" || exit 1; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	(echo "/* GNU ld script"; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	 echo "   Add DT_NEEDED entry for -latomic only if needed.  */"; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	 echo "INPUT ( AS_NEEDED ( -latomic ) )" \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	) > libatomic_asneeded.so; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	rm -f libatomic_asneeded.a; \
+@LIBAT_BUILD_ASNEEDED_SOLINK_TRUE@	$(LN_S) libatomic.a libatomic_asneeded.a
 
 # target overrides
 -include $(tmake_file)
diff --git a/libatomic/acinclude.m4 b/libatomic/acinclude.m4
index f35ab5b60..784b77faf 100644
--- a/libatomic/acinclude.m4
+++ b/libatomic/acinclude.m4
@@ -341,9 +341,14 @@ AC_DEFUN([LIBAT_CHECK_LINKER_FEATURES], [
   changequote(,)
   ldver=`$LD --version 2>/dev/null |
          sed -e 's/[. ][0-9]\{8\}$//;s/.* \([^ ]\{1,\}\)$/\1/; q'`
+  ldasneeded=`$LD --help 2>/dev/null | grep as-needed`
   changequote([,])
   libat_gnu_ld_version=`echo $ldver | \
          $AWK -F. '{ if (NF<3) [$]3=0; print ([$]1*100+[$]2)*100+[$]3 }'`
+  libat_ld_asneeded=no
+  if test -n "$ldasneeded"; then
+    libat_ld_asneeded=yes
+  fi
 
   # Set --gc-sections.
   if test "$with_gnu_ld" = "notbroken"; then
@@ -390,6 +395,7 @@ AC_DEFUN([LIBAT_CHECK_LINKER_FEATURES], [
 
   AC_SUBST(SECTION_LDFLAGS)
   AC_SUBST(OPT_LDFLAGS)
+  AM_CONDITIONAL(LIBAT_BUILD_ASNEEDED_SOLINK, test $libat_ld_asneeded != no)
 ])
 
 
diff --git a/libatomic/configure b/libatomic/configure
index d579bab96..3917b2daf 100755
--- a/libatomic/configure
+++ b/libatomic/configure
@@ -654,6 +654,8 @@ LIBAT_BUILD_VERSIONED_SHLIB_GNU_FALSE
 LIBAT_BUILD_VERSIONED_SHLIB_GNU_TRUE
 LIBAT_BUILD_VERSIONED_SHLIB_FALSE
 LIBAT_BUILD_VERSIONED_SHLIB_TRUE
+LIBAT_BUILD_ASNEEDED_SOLINK_FALSE
+LIBAT_BUILD_ASNEEDED_SOLINK_TRUE
 OPT_LDFLAGS
 SECTION_LDFLAGS
 SYSROOT_CFLAGS_FOR_TARGET
@@ -3415,6 +3417,26 @@ esac
 # the wrong, non-multilib-adjusted value will be used in multilibs.
 # As a side effect, we have to subst CFLAGS ourselves.
 
+# AC_PROG_CC sets CFLAGS to "-g -O2" by default (if unset), and
+# then compile conftests with default CFLAGS, leaving no place to temporarily
+# modify CFLAGS and restore them later.  However we need to pass
+# -fno-link-libatomic in CFLAGS so conftests compiled in AC_PROG_CC don't fail.
+# Assert that CFLAGS is always set by user so the default setting of CFLAGS by
+# AC_PROG_CC won't be applicable anyway.
+if test -z "${CFLAGS}"; then
+  as_fn_error $? "CFLAGS must be set." "$LINENO" 5
+fi
+
+# In order to override CFLAGS_FOR_TARGET, all of our special flags go
+# in XCFLAGS.  But we need them in CFLAGS during configury.  So put them
+# in both places for now and restore CFLAGS at the end of config.
+__libatomic_save_CFLAGS__="$CFLAGS"
+
+# Append -fno-link-libatomic to avoid automatically linking libatomic,
+# while building libatomic itself.
+XCFLAGS="$XCFLAGS -fno-link-libatomic"
+CFLAGS="$__libatomic_save_CFLAGS__ $XCFLAGS"
+
 
 
 ac_ext=c
@@ -4593,11 +4615,6 @@ fi
 
 
 
-# In order to override CFLAGS_FOR_TARGET, all of our special flags go
-# in XCFLAGS.  But we need them in CFLAGS during configury.  So put them
-# in both places for now and restore CFLAGS at the end of config.
-save_CFLAGS="$CFLAGS"
-
 # Find other programs we need.
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
@@ -11946,7 +11963,7 @@ _ACEOF
 
 # Disable fallbacks to __sync routines from libgcc.  Otherwise we'll
 # make silly decisions about what the cpu can do.
-CFLAGS="$save_CFLAGS -fno-sync-libcalls $XCFLAGS"
+CFLAGS="$__libatomic_save_CFLAGS__ -fno-sync-libcalls $XCFLAGS"
 
 # Check header files.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
@@ -14967,7 +14984,7 @@ _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
   XPCFLAGS=" -pthread"
 else
-  CFLAGS="$save_CFLAGS $XCFLAGS" LIBS="-lpthread $LIBS"
+  CFLAGS="$__libatomic_save_CFLAGS__ $XCFLAGS" LIBS="-lpthread $LIBS"
      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <pthread.h>
@@ -14990,7 +15007,7 @@ rm -f core conftest.err conftest.$ac_objext \
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
-  CFLAGS="$save_CFLAGS $XPCFLAGS"
+  CFLAGS="$__libatomic_save_CFLAGS__ $XPCFLAGS $XCFLAGS"
   ;;
 esac
 
@@ -15293,9 +15310,14 @@ with_gnu_ld=$lt_cv_prog_gnu_ld
 
   ldver=`$LD --version 2>/dev/null |
          sed -e 's/[. ][0-9]\{8\}$//;s/.* \([^ ]\{1,\}\)$/\1/; q'`
+  ldasneeded=`$LD --help 2>/dev/null | grep as-needed`
 
   libat_gnu_ld_version=`echo $ldver | \
          $AWK -F. '{ if (NF<3) $3=0; print ($1*100+$2)*100+$3 }'`
+  libat_ld_asneeded=no
+  if test -n "$ldasneeded"; then
+    libat_ld_asneeded=yes
+  fi
 
   # Set --gc-sections.
   if test "$with_gnu_ld" = "notbroken"; then
@@ -15359,6 +15381,14 @@ $as_echo "$ac_sectionLDflags" >&6; }
 
 
 
+   if test $libat_ld_asneeded != no; then
+  LIBAT_BUILD_ASNEEDED_SOLINK_TRUE=
+  LIBAT_BUILD_ASNEEDED_SOLINK_FALSE='#'
+else
+  LIBAT_BUILD_ASNEEDED_SOLINK_TRUE='#'
+  LIBAT_BUILD_ASNEEDED_SOLINK_FALSE=
+fi
+
 
 
 
@@ -15565,7 +15595,7 @@ $as_echo "$as_me: versioning on shared library symbols is $enable_symvers" >&6;}
 
 
 # Cleanup and exit.
-CFLAGS="$save_CFLAGS"
+CFLAGS="$__libatomic_save_CFLAGS__"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
@@ -15990,6 +16020,10 @@ if test -z "${ENABLE_DARWIN_AT_RPATH_TRUE}" && test -z "${ENABLE_DARWIN_AT_RPATH
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 
+if test -z "${LIBAT_BUILD_ASNEEDED_SOLINK_TRUE}" && test -z "${LIBAT_BUILD_ASNEEDED_SOLINK_FALSE}"; then
+  as_fn_error $? "conditional \"LIBAT_BUILD_ASNEEDED_SOLINK\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
 if test -z "${LIBAT_BUILD_VERSIONED_SHLIB_TRUE}" && test -z "${LIBAT_BUILD_VERSIONED_SHLIB_FALSE}"; then
   as_fn_error $? "conditional \"LIBAT_BUILD_VERSIONED_SHLIB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
diff --git a/libatomic/configure.ac b/libatomic/configure.ac
index aafae7102..fa7e36713 100644
--- a/libatomic/configure.ac
+++ b/libatomic/configure.ac
@@ -129,6 +129,26 @@ AC_SUBST(toolexeclibdir)
 # the wrong, non-multilib-adjusted value will be used in multilibs.
 # As a side effect, we have to subst CFLAGS ourselves.
 
+# AC_PROG_CC sets CFLAGS to "-g -O2" by default (if unset), and
+# then compile conftests with default CFLAGS, leaving no place to temporarily
+# modify CFLAGS and restore them later.  However we need to pass
+# -fno-link-libatomic in CFLAGS so conftests compiled in AC_PROG_CC don't fail.
+# Assert that CFLAGS is always set by user so the default setting of CFLAGS by
+# AC_PROG_CC won't be applicable anyway.
+if test -z "${CFLAGS}"; then
+  AC_MSG_ERROR([CFLAGS must be set.])
+fi
+
+# In order to override CFLAGS_FOR_TARGET, all of our special flags go
+# in XCFLAGS.  But we need them in CFLAGS during configury.  So put them
+# in both places for now and restore CFLAGS at the end of config.
+__libatomic_save_CFLAGS__="$CFLAGS"
+
+# Append -fno-link-libatomic to avoid automatically linking libatomic,
+# while building libatomic itself.
+XCFLAGS="$XCFLAGS -fno-link-libatomic"
+CFLAGS="$__libatomic_save_CFLAGS__ $XCFLAGS"
+
 m4_rename([_AC_ARG_VAR_PRECIOUS],[real_PRECIOUS])
 m4_define([_AC_ARG_VAR_PRECIOUS],[])
 AC_PROG_CC
@@ -137,11 +157,6 @@ m4_rename_force([real_PRECIOUS],[_AC_ARG_VAR_PRECIOUS])
 
 AC_SUBST(CFLAGS)
 
-# In order to override CFLAGS_FOR_TARGET, all of our special flags go
-# in XCFLAGS.  But we need them in CFLAGS during configury.  So put them
-# in both places for now and restore CFLAGS at the end of config.
-save_CFLAGS="$CFLAGS"
-
 # Find other programs we need.
 AC_CHECK_TOOL(AR, ar)
 AC_CHECK_TOOL(NM, nm)
@@ -186,7 +201,7 @@ AC_DEFINE_UNQUOTED(IFUNC_RESOLVER_ARGS, $IFUNC_RESOLVER_ARGS,
 
 # Disable fallbacks to __sync routines from libgcc.  Otherwise we'll
 # make silly decisions about what the cpu can do.
-CFLAGS="$save_CFLAGS -fno-sync-libcalls $XCFLAGS"
+CFLAGS="$__libatomic_save_CFLAGS__ -fno-sync-libcalls $XCFLAGS"
 
 # Check header files.
 AC_STDC_HEADERS
@@ -227,7 +242,7 @@ case " $config_path " in
       void *g(void *d) { return NULL; }],
      [pthread_t t; pthread_create(&t,NULL,g,NULL);])],
     [XPCFLAGS=" -pthread"],
-    [CFLAGS="$save_CFLAGS $XCFLAGS" LIBS="-lpthread $LIBS"
+    [CFLAGS="$__libatomic_save_CFLAGS__ $XCFLAGS" LIBS="-lpthread $LIBS"
      AC_LINK_IFELSE(
       [AC_LANG_PROGRAM(
        [#include <pthread.h>
@@ -235,7 +250,7 @@ case " $config_path " in
        [pthread_t t; pthread_create(&t,NULL,g,NULL);])],
       [],
       [AC_MSG_ERROR([Pthreads are required to build libatomic])])])
-  CFLAGS="$save_CFLAGS $XPCFLAGS"
+  CFLAGS="$__libatomic_save_CFLAGS__ $XPCFLAGS $XCFLAGS"
   ;;
 esac
 
@@ -251,7 +266,7 @@ fi
 LIBAT_ENABLE_SYMVERS
 
 # Cleanup and exit.
-CFLAGS="$save_CFLAGS"
+CFLAGS="$__libatomic_save_CFLAGS__"
 AC_CACHE_SAVE
 
 AC_ARG_ENABLE([werror],
diff --git a/libgcc/config/t-slibgcc b/libgcc/config/t-slibgcc
index 68cb3b31e..6617b7e1f 100644
--- a/libgcc/config/t-slibgcc
+++ b/libgcc/config/t-slibgcc
@@ -30,6 +30,15 @@ SHLIB_LC = -lc
 SHLIB_MAKE_SOLINK = $(LN_S) $(SHLIB_SONAME) $(SHLIB_DIR)/$(SHLIB_SOLINK)
 SHLIB_INSTALL_SOLINK = $(LN_S) $(SHLIB_SONAME) \
 	$(DESTDIR)$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)
+SHLIB_ASNEEDED_SOLINK = @shlib_base_name@_asneeded.so
+SHLIB_MAKE_ASNEEDED_SOLINK = \
+        (echo "/* GNU ld script"; \
+         echo "   Add DT_NEEDED entry for libgcc_s.so only if needed.  */"; \
+         echo "INPUT ( AS_NEEDED ( -lgcc_s ) )" \
+        ) > $(SHLIB_DIR)/$(SHLIB_ASNEEDED_SOLINK)
+SHLIB_INSTALL_ASNEEDED_SOLINK = \
+        $(INSTALL_DATA) $(SHLIB_DIR)/$(SHLIB_ASNEEDED_SOLINK) \
+          $(DESTDIR)$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_ASNEEDED_SOLINK)
 
 SHLIB_LINK = $(CC) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \
 	$(SHLIB_LDFLAGS) $(LDFLAGS) \
@@ -41,7 +50,8 @@ SHLIB_LINK = $(CC) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \
 		$(SHLIB_DIR)/$(SHLIB_SONAME).backup; \
 	else true; fi && \
 	mv $(SHLIB_DIR)/$(SHLIB_SONAME).tmp $(SHLIB_DIR)/$(SHLIB_SONAME) && \
-	$(SHLIB_MAKE_SOLINK)
+	$(SHLIB_MAKE_SOLINK) && \
+	$(SHLIB_MAKE_ASNEEDED_SOLINK)
 
 INSTALL_SHLIB = $(INSTALL_DATA)
 
@@ -50,4 +60,5 @@ SHLIB_INSTALL = \
 	$(INSTALL_SHLIB) $(SHLIB_DIR)/$(SHLIB_SONAME) \
 	  $(DESTDIR)$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SONAME); \
 	rm -f $(DESTDIR)$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK); \
-	$(SHLIB_INSTALL_SOLINK)
+	$(SHLIB_INSTALL_SOLINK); \
+	$(SHLIB_INSTALL_ASNEEDED_SOLINK)
-- 
2.52.0

